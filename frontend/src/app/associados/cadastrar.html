<main class="main-content">

  <header class="main-header">
    <h1>Cadastrar Novo Associado</h1>
  </header>

  <div class="form-container">
    <form [formGroup]="associadoForm" (ngSubmit)="onSubmit()">

      <fieldset>
        <legend>Dados Pessoais</legend>
        <div class="form-grid">

          <div class="form-group col-span-2">
            <label for="nome">Nome Completo *</label>
            <input type="text" id="nome" formControlName="nome" maxlength="100">
            <div *ngIf="associadoForm.get('nome')?.invalid && (associadoForm.get('nome')?.dirty || associadoForm.get('nome')?.touched)" class="error-message">
              <div *ngIf="associadoForm.get('nome')?.errors?.['required']">Nome é obrigatório.</div>
              <div *ngIf="associadoForm.get('nome')?.errors?.['minlength']">Nome deve ter no mínimo 3 caracteres.</div>
              <div *ngIf="associadoForm.get('nome')?.errors?.['maxlength']">Nome deve ter no máximo 100 caracteres.</div>
            </div>
          </div>

          <div class="form-group">
            <label for="cpf">CPF *</label>
            <input type="text" id="cpf" formControlName="cpf" placeholder="Ex: 123.456.789-00">
            <div *ngIf="associadoForm.get('cpf')?.invalid && (associadoForm.get('cpf')?.dirty || associadoForm.get('cpf')?.touched)" class="error-message">
              <div *ngIf="associadoForm.get('cpf')?.errors?.['required']">CPF é obrigatório.</div>
              <div *ngIf="associadoForm.get('cpf')?.errors?.['pattern']">CPF inválido. Use o formato XXX.XXX.XXX-XX.</div>
            </div>
          </div>

          <div class="form-group">
            <label for="dataNascimento">Data de Nascimento *</label>
            <input type="date" id="dataNascimento" formControlName="dataNascimento">
            <div *ngIf="associadoForm.get('dataNascimento')?.invalid && (associadoForm.get('dataNascimento')?.dirty || associadoForm.get('dataNascimento')?.touched)" class="error-message">
              <div *ngIf="associadoForm.get('dataNascimento')?.errors?.['required']">Data de Nascimento é obrigatória.</div>
            </div>
          </div>

          <div class="form-group">
            <label for="situacao">Situação *</label>
            <select id="situacao" formControlName="situacao">
              <option value="Adimplente">Adimplente</option>
              <option value="Inadimplente">Inadimplente</option>
            </select>
            <div *ngIf="associadoForm.get('situacao')?.invalid && (associadoForm.get('situacao')?.dirty || associadoForm.get('situacao')?.touched)" class="error-message">
              <div *ngIf="associadoForm.get('situacao')?.errors?.['required']">Situação é obrigatória.</div>
            </div>
          </div>

          <div class="form-group">
            <label for="cidadeId">Cidade (ID) *</label>
            <input type="number" id="cidadeId" formControlName="cidadeId">
            <div *ngIf="associadoForm.get('cidadeId')?.invalid && (associadoForm.get('cidadeId')?.dirty || associadoForm.get('cidadeId')?.touched)" class="error-message">
              <div *ngIf="associadoForm.get('cidadeId')?.errors?.['required']">ID da Cidade é obrigatório.</div>
              <div *ngIf="associadoForm.get('cidadeId')?.errors?.['min']">ID da Cidade deve ser no mínimo 1.</div>
            </div>
          </div>

        </div>
      </fieldset>

      <div class="form-actions">
        <a routerLink="/associados" class="btn btn-cancel">Cancelar</a>
        <button type="submit" class="btn btn-submit" [disabled]="associadoForm.invalid">Salvar Cadastro</button>
      </div>

    </form>
  </div>

</main>

<style>
  .error-message {
    color: red;
    font-size: 0.8em;
    margin-top: 5px;
  }
</style>
